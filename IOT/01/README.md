工作中接触到的iot设备，大多是一个某个类别的iot设备。

因为厂商不同，各自的架构也不同，有的是QNX的系统，有的是android, 有的是Ubuntu自己魔改版，有的更骚，

android和QNX都有。

因为是纯黑盒测试，在不进入工程模式的时候，只能做一些很浅的操作。

如果能进入工程模式，就可以做很多骚操作了，比如打开调试的接口，导出系统日志之类的。打开工程模式能更方便的我们进行测试。

#### 一般情况下，进入工程模式的主要途径有：

##### 1.物理按键乱按 屏幕上乱按

​	有的设备上，是有物理按键的，有的没有。

​	物理按键乱按，可以多尝试一下，比如几个键组合按，长按某个键啊之类的。

​	屏幕乱按，这里可以去尝试一些系统信息这里。类似版本号啊，或者主要功能的app尝试乱按。

​	这里说乱按，不太有逼格，这里说的高大上一点可以叫手动 fuzzing。

​	这种方法，成功率比较低。



##### 2.分析固件或者apk 逆向分析逻辑

​	有的场景，可能甲方提供了一些镜像和关键文件，这时候就可以找到一些关键的固件或者app。

​	重点是，跟设置有关的apk或者固件。

​	可以用反编译工具，ida，jeb 或者在镜像中全盘搜索 'Engineering mode' 这种比较关键的字符串。

​	也可以逆向设置相关的逻辑，看有没有进入工程模式的相关代码。

​	这种方法，成功率跟逆向水平水平有关。



##### 3.在有端口可以进入调试接口的时候

​	扫描iot设备开启的所有端口，看看有没有adb端口，或者相关的调试端口。

​	这时候如果是空密码，或者弱口令能进入就更完美了。

​	假设你比较幸运，通过adb 弱口令进入了 shell。 这时候可以尝试强制调用adb的设置界面。

```shell
adb shell am start com.android.settings/com.android.settings.Settings
```

​	在android 的设置界面找找有没有进入工程模式的入口，也可以看看开发者模式有啥东西(如果有的话)。

​	当然这时候，你能进入adb，也就能从系统中pull出很多文件，就可以尝试一下第二个方法了。

​	这种方法，成功率跟逆向水平水平有关。



##### 4.问甲方

​	这个成功率最高，包治百病。



##### 5.其他比较玄学的方式

​	这里说玄学，是因为，有成功先例，但是，回想起来都觉得不可思议。

​	某次，黑盒测试的设备，有类似天猫精灵，小爱同学，那种语音对话的功能。

​	于是，同事直接去问，xxx, 工程模式怎么打开。

​	然后，这个人工智障就告诉了我们怎么打开工程模式。

​	而且，打开成功了。
